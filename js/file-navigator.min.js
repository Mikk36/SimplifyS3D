// by Anton Purin, 2015 MIT https://github.com/anpur/client-line-navigator
function FileNavigator(a,b){var c=this,d=a.size;a.navigator=this;var e=0,f=function(){if(!d||0==d)return 0;var a=parseInt(100*(e/d));return a>100?100:a},g=function(b,c,d){e=b+c;var f=new FileReader;f.onloadend=function(a){var b;f.result&&(b=new Int8Array(f.result,0),b.slice=b.subarray),d(a.err,b,a.loaded)},f.readAsArrayBuffer(a.slice(b,b+c))},h=function(a,c){var d=new FileReader;d.onloadend=function(a){c(a.currentTarget.result)},"undefined"!=typeof b?d.readAsText(new Blob([a]),b):d.readAsText(new Blob([a]))},i=new LineNavigator(g,h,{chunkSize:4194304});c.getMilestones=i.getMilestones,c.readSomeLines=function(a,b){i.readSomeLines(a,function(a,c,d,e){b(a,c,d,e,f())})},c.readLines=function(a,b,c){i.readLines(a,b,function(a,b,d,e){c(a,b,d,e,f())})},c.find=i.find,c.findAll=i.findAll,c.getSize=function(b){return b(a?a.size:0)}}function FileNavigator(a,b){var c=this,d=a.size;a.navigator=this;var e=0,f=function(){if(!d||0==d)return 0;var a=parseInt(100*(e/d));return a>100?100:a},g=function(b,c,d){e=b+c;var f=new FileReader;f.onloadend=function(a){var b;f.result&&(b=new Int8Array(f.result,0),b.slice=b.subarray),d(a.err,b,a.loaded)},f.readAsArrayBuffer(a.slice(b,b+c))},h=function(a,c){var d=new FileReader;d.onloadend=function(a){c(a.currentTarget.result)},"undefined"!=typeof b?d.readAsText(new Blob([a]),b):d.readAsText(new Blob([a]))},i=new LineNavigator(g,h,{chunkSize:4194304});c.getMilestones=i.getMilestones,c.readSomeLines=function(a,b){i.readSomeLines(a,function(a,c,d,e){b(a,c,d,e,f())})},c.readLines=function(a,b,c){i.readLines(a,b,function(a,b,d,e){c(a,b,d,e,f())})},c.find=i.find,c.findAll=i.findAll,c.getSize=function(b){return b(a?a.size:0)}}
